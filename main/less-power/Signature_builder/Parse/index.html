<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Parse (less-power.Signature_builder.Parse)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">less-power</a> &#x00BB; <a href="../index.html">Signature_builder</a> &#x00BB; Parse</nav><header class="odoc-preamble"><h1>Module <code><span>Signature_builder.Parse</span></code></h1><p>Parser for include specifications.</p><p>To use the signature builder, first enable the PPX rewriter. With dune, add the PPX rewriter to your component's <code>dune</code> file:</p><pre class="language-dune"><code>(preprocess (pps less-power.signature-builder-ppx))</code></pre><p>Then, within a signature, use an extension point to include signature items, for example:</p><pre class="language-ocaml"><code>module type Foo : sig
  [%%include stdlib.stdlib (fst, snd)]
end</code></pre><p>Inclusion specifications can be more complex. The full grammar is as follows:</p><pre class="language-text"><code>include-specs := include-spec | '()' | '(' include-spec {',' include-spec} ')'
include-spec :=
  | from-spec items-spec
  | '{' 'items =' include-specs ';' ['attributes = __' {attribute} ';'] '}'
from-spec := (* qualified path to signature-info to take items from *)
  lowercase-ident {'.' lowercase-ident}+
items-spec := (* ordered set of items *)
  item-spec | '!standard' | items-spec '-' items-spec | '()' | '(' items-spec {',' items-spec} ')'
item-spec := item-names ['@' item-options]
item-names := item-name | '[' {item-name ';'}+ ']'
item-name := (* refer to values, types, modules, ... *)
  lowercase-ident | capitalized-ident | '[]'</code></pre><p>The following more complex example includes <code>t</code> and <code>to_string_default</code> from the standard <code>Printexc</code> module, then also includes everything except that type and that value, with each item given the <code>unsafe</code> attribute:</p><pre class="language-ocaml"><code>[%%include
  stdlib.printexc (t, to_string_default),
  { attributes = __ [@alert unsafe &quot;This item is not permitted&quot;];
    items = stdlib.printexc (!standard - (t, to_string_default)) }
]</code></pre><p>To disambiguate signature items of different kinds with the same name, use the syntax <code>identifier @ { kind = &quot;kind&quot;}</code>, where <code>kind</code> is one of <code>value</code>, <code>type</code>, <code>exception</code>, <code>module</code>, <code>module-type</code>. For example, to include the standard <code>ref</code> function:</p><pre class="language-ocaml"><code>[%%include stdlib.stdlib (ref @ { kind = &quot;value&quot; })]</code></pre><p>The preprocessor will refuse to include types which don't include a type equation (e.g. abstract types and types defined only by constructors). This is because this will create copies of the type, which is generally not the intention. In this case, types must be defined manually without the inclusion mechanism, e.g.:</p><pre class="language-ocaml"><code>type ('a, 'b) result = ('a, 'b) Stdlib.result = Ok of 'a | Error of 'b</code></pre></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-ordered_set"><a href="#val-ordered_set" class="anchor"></a><code><span><span class="keyword">val</span> ordered_set : 
  <span><span class="xref-unresolved">Ppxlib_ast</span>.Ast.expression <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib_ast</span>.Ast.expression <a href="../Ordered_set/index.html#type-t">Ordered_set.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib_ast</span>.Ast.expression list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kind"><a href="#val-kind" class="anchor"></a><code><span><span class="keyword">val</span> kind : <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-kind">kind</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-signature_item_pat"><a href="#val-signature_item_pat" class="anchor"></a><code><span><span class="keyword">val</span> signature_item_pat : <span><span class="xref-unresolved">Ppxlib_ast</span>.Ast.expression <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-signature_item_pat">signature_item_pat</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dotted_name"><a href="#val-dotted_name" class="anchor"></a><code><span><span class="keyword">val</span> dotted_name : <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.longident</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-include_specs"><a href="#val-include_specs" class="anchor"></a><code><span><span class="keyword">val</span> include_specs : <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-include_specs">include_specs</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-include_spec"><a href="#val-include_spec" class="anchor"></a><code><span><span class="keyword">val</span> include_spec : <span><span class="label">allow_comma</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-include_spec">include_spec</a></span></code></div></div></div></body></html>
